<div class="modal modal-open" id="modal">
  <div class="modal-box w-full max-w-xl">
    <h3 class="font-bold text-lg mb-4">{{@title}}</h3>

    <form {{@htmx_form_action | raw }} hx-target="#modal" hx-swap="innerHTML" _="on htmx:afterRequest wait 100ms then set #modal.innerHTML to ''" class="space-y-4">
      <div class="form-control">
        <label class="label">Nom</label>
        <input name="nom" type="text" value="{{@mode=='edit'  ? @user.nom : '' | strtoupper}}" class="input input-bordered w-full" required />
      </div>

      <div class="form-control">
        <label class="label">Prénom</label>
        <input name="prenom" type="text" value="{{@mode=='edit' ? @user.prenom : '' | ucfirst}}" class="input input-bordered w-full" required />
      </div>

      <div class="form-control">
        <label class="label">Mot de passe</label>
        <input name="password" type="password" class="input input-bordered w-full" {{@password_state}} />
      </div>

      <div class="form-control">
        <label class="label">Rôle</label>
        <select name="role" class="select select-bordered w-full">
          <option value="user" {{ @selected_roles.user }}>Utilisateur</option>
          <option value="superuser" {{ @selected_roles.superuser }}>Superviseur</option>
          <option value="admin" {{ @selected_roles.admin }}>Administrateur</option>
        </select>
      </div>

      <div class="modal-action">
        <button type="button" class="btn" _="on click set #modal.innerHTML to ''">Annuler</button>
        <button type="submit" class="btn btn-primary">{{@btn_title}}</button>
      </div>
    </form>
  </div>
</div>
